# 二手交易平台 Flask 后端 - 快速启动指南

## 🚀 快速启动

### 方法一：使用批处理文件（推荐）

1. 双击运行 `start.bat` 文件
2. 等待依赖安装完成
3. 服务将在 `http://localhost:5000` 启动

### 方法二：手动启动

1. 打开命令行，进入 backend 目录
2. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```
3. 启动服务：
   ```bash
   python run.py
   ```

## 📋 前置要求

- Python 3.7 或更高版本
- pip 包管理器

## 🧪 测试 API

### 方法一：使用测试脚本

```bash
python test_api.py
```

### 方法二：使用 curl 命令

1. **用户注册**
   ```bash
   curl -X POST http://localhost:5000/api/register \
     -H "Content-Type: application/json" \
     -d '{"username": "testuser", "password": "123456", "email": "test@example.com"}'
   ```

2. **用户登录**
   ```bash
   curl -X POST http://localhost:5000/api/login \
     -H "Content-Type: application/json" \
     -d '{"username": "testuser", "password": "123456"}'
   ```

3. **获取商品列表**
   ```bash
   curl http://localhost:5000/api/products
   ```

## 🗄️ 数据库管理

运行数据库管理工具：

```bash
python db_manager.py
```

功能包括：
- 初始化数据库
- 创建示例数据
- 查看数据库信息
- 清空数据库

## 📁 项目结构

```
backend/
├── app.py              # 主应用文件
├── config.py           # 配置文件
├── run.py              # 启动文件
├── test_api.py         # API 测试文件
├── db_manager.py       # 数据库管理工具
├── start.bat           # Windows 启动脚本
├── requirements.txt    # Python 依赖
├── README.md          # 详细说明文档
└── 快速启动指南.md     # 本文件
```

## 🔧 常见问题

### 1. 端口被占用
如果 5000 端口被占用，可以修改 `run.py` 中的端口号：
```python
app.run(host='0.0.0.0', port=5001, debug=True)
```

### 2. 依赖安装失败
确保使用正确的 Python 版本：
```bash
python --version
```

### 3. 数据库问题
运行数据库管理工具重新初始化：
```bash
python db_manager.py
```

## 📱 与 Android 应用集成

1. 确保 Android 应用中的 API 地址指向 `http://localhost:5000`
2. 如果使用模拟器，地址可能是 `http://10.0.2.2:5000`
3. 如果使用真机，请使用电脑的 IP 地址

## 🔒 安全注意事项

- 生产环境请修改 `SECRET_KEY`
- 建议使用 HTTPS
- 添加适当的访问控制
- 定期备份数据库

## 📞 技术支持

如果遇到问题，请检查：
1. Python 版本是否正确
2. 依赖是否安装完整
3. 端口是否被占用
4. 防火墙设置

---

**祝您使用愉快！** 🎉 