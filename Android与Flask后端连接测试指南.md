# Android与Flask后端连接测试指南

## 🚀 快速测试步骤

### 1. 确保Flask后端运行
```bash
# 在backend目录下运行
python run.py
```
确保看到：
```
* Running on http://127.0.0.1:5000
* Running on http://10.34.68.221:5000
```

### 2. 测试API接口
```bash
# 在backend目录下运行
python test_api.py
```
这会自动测试所有API接口。

### 3. 编译并运行Android应用
在Android Studio中编译并运行应用。

## 📱 测试流程

### 第一步：用户注册/登录
1. 打开Android应用
2. 点击"注册"按钮
3. 输入用户名和密码（至少6位）
4. 点击"注册"按钮
5. 应该看到"注册成功！"提示

### 第二步：查看商品列表
1. 注册成功后自动进入主页
2. 应该能看到商品列表（如果有数据）
3. 如果没有商品，会显示空列表

### 第三步：发布商品
1. 点击底部导航栏的"发布"按钮
2. 填写商品信息：
   - 标题：iPhone 12
   - 描述：九成新iPhone 12
   - 价格：3999
   - 选择分类：电子产品
   - 选择成色：九成新
3. 点击"发布"按钮
4. 应该看到"商品发布成功！"提示
5. 自动跳转到商品详情页

### 第四步：查看商品详情
1. 在商品详情页应该能看到：
   - 商品标题
   - 商品描述
   - 价格
   - 分类
   - 成色
   - 卖家信息

### 第五步：查看商品列表更新
1. 返回主页
2. 应该能看到刚发布的商品在列表中

## 🔧 常见问题排查

### 1. 网络连接问题
**症状**：注册/登录失败，提示网络错误
**解决**：
- 确保手机和电脑在同一网络
- 检查防火墙设置
- 确认Flask服务正在运行

### 2. API地址问题
**症状**：无法连接到服务器
**解决**：
- 检查`ApiClient.java`中的`BASE_URL`
- 确保使用正确的IP地址
- 如果使用模拟器，可能需要使用`10.0.2.2:5000`

### 3. 权限问题
**症状**：应用崩溃或无法访问网络
**解决**：
- 确保`AndroidManifest.xml`中有网络权限
- 检查应用权限设置

### 4. 数据解析问题
**症状**：应用崩溃或显示异常
**解决**：
- 检查API响应格式
- 查看Logcat错误信息
- 确保JSON解析正确

## 📊 测试检查清单

- [ ] Flask后端服务正常运行
- [ ] API测试脚本执行成功
- [ ] Android应用能正常启动
- [ ] 用户注册功能正常
- [ ] 用户登录功能正常
- [ ] 商品列表能正常显示
- [ ] 商品发布功能正常
- [ ] 商品详情页能正常显示
- [ ] 卖家信息正确显示

## 🐛 调试技巧

### 1. 查看网络请求
在Android Studio的Logcat中搜索"ApiClient"标签，查看网络请求日志。

### 2. 查看API响应
在Flask后端控制台查看请求日志和响应。

### 3. 测试API接口
使用Postman或curl测试API接口：
```bash
curl -X POST http://10.34.68.221:5000/api/register \
  -H "Content-Type: application/json" \
  -d '{"username": "testuser", "password": "123456", "email": "test@example.com"}'
```

## 📞 技术支持

如果遇到问题：
1. 检查Flask服务是否正常运行
2. 查看Android Studio的Logcat错误信息
3. 确认网络连接正常
4. 检查API地址配置是否正确

---

**祝您测试顺利！** 🎉 